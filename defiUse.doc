DefiGame åˆçº¦å‰ç«¯è°ƒç”¨æ–‡æ¡£
ğŸ”— ä¸»ç½‘åœ°å€ï¼ˆBSC Mainnetï¼‰ï¼š0xa7aa6034573d9e251d8cea23b03D40fb5314bd0e

ğŸ“¦ ABIï¼šè¯·ä½¿ç”¨è¯¥åˆçº¦çš„ç¼–è¯‘ ABIï¼ˆæˆ–æå–æ‰€éœ€æ–¹æ³•çš„ ABI ç‰‡æ®µï¼‰

âœ… åˆçº¦åˆå§‹åŒ–
ts
å¤åˆ¶
ç¼–è¾‘
import { ethers } from "ethers";

const contract = new ethers.Contract(
  "0xa7aa6034573d9e251d8cea23b03D40fb5314bd0e",
  abi,
  signer
);
1. getPrice(uint howUsdt) â†’ uint
ğŸ“Œ åŠŸèƒ½ï¼šè®¡ç®—ç”¨æˆ·éœ€è¦è´¨æŠ¼å¤šå°‘ _sosk TOKEN
è°ƒç”¨ç¤ºä¾‹ï¼š
ts
å¤åˆ¶
ç¼–è¾‘
const inputUSDT = ethers.utils.parseUnits("100", 18); // 100 USDT
const tokenAmount = await contract.getPrice(inputUSDT);
console.log(tokenAmount.toString()); // è¿”å›çš„ `_sosk` token æ•°é‡ï¼ˆæ— å°æ•°ï¼‰
2. stake(address _invite, uint howUnum)
ğŸ“Œ åŠŸèƒ½ï¼šç”¨æˆ·è´¨æŠ¼ USDT ç­‰å€¼çš„ _sosk ä»£å¸ï¼Œå¹¶ç»‘å®šæ¨èäºº
æ­¥éª¤ï¼š
ç”¨æˆ·å…ˆ approve _sosk åˆçº¦æˆæƒï¼›

å†è°ƒç”¨ stake()ã€‚

ç¤ºä¾‹ï¼š
ts
å¤åˆ¶
ç¼–è¾‘
const howUnum = ethers.utils.parseUnits("100", 18); // 100 USDT
const inviteAddress = "0x1234..."; // æ¨èäººåœ°å€

await contract.stake(inviteAddress, howUnum);
3. claimUser()
ğŸ“Œ åŠŸèƒ½ï¼šé¢†å–ç”¨æˆ·çš„ä¸ªäººç®—åŠ›æ”¶ç›Š
ç¤ºä¾‹ï¼š
ts
å¤åˆ¶
ç¼–è¾‘
await contract.claimUser();
4. claimTeam()
ğŸ“Œ åŠŸèƒ½ï¼šé¢†å–ç”¨æˆ·çš„å›¢é˜Ÿæ”¶ç›Šï¼ˆç”±æ¨èç½‘ç»œäº§ç”Ÿï¼‰
ç¤ºä¾‹ï¼š
ts
å¤åˆ¶
ç¼–è¾‘
await contract.claimTeam();
5. getInfo(address addr) â†’ INFO struct
ğŸ“Œ åŠŸèƒ½ï¼šè·å–ç”¨æˆ·å®Œæ•´æ”¶ç›Šä¸èº«ä»½ä¿¡æ¯
ç¤ºä¾‹ï¼š
ts
å¤åˆ¶
ç¼–è¾‘
const info = await contract.getInfo(userAddress);
è¿”å›ç»“æ„ INFOï¼š
å­—æ®µ	ç±»å‹	è¯´æ˜
bbaCoin	address	_sosk ä»£å¸åœ°å€
inivet	address	é‚€è¯·äººåœ°å€
allStakeCp	uint	å…¨ç½‘æ€»ç®—åŠ›
userCp	uint	ç”¨æˆ·æœ‰æ•ˆç®—åŠ›ï¼ˆè¡°å‡åï¼‰
teamCp2	uint	å›¢é˜Ÿç®—åŠ›ï¼ˆ15ä»£ï¼‰
userAward	uint	å¯é¢†å–ä¸ªäººå¥–åŠ±
teamLength	uint	ç›´æ¨äººæ•°
team2Length	uint	å›¢é˜Ÿæ€»äººæ•°ï¼ˆæœ€å¤š15çº§ï¼‰
overAward	uint	å·²é¢†å–æ€»å¥–åŠ±
levle	uint	ç”¨æˆ·ç­‰çº§ï¼ˆ1-5ï¼‰
tokenNum	uint	åˆçº¦å‰©ä½™ TOKEN æ•°é‡

6. getUserReward(address) â†’ uint
ğŸ“Œ åŠŸèƒ½ï¼šæŸ¥è¯¢ä»Šæ—¥å¯ä»¥é¢†å–çš„ä¸ªäººå¥–åŠ±
ts
å¤åˆ¶
ç¼–è¾‘
const reward = await contract.getUserReward(userAddress);
7. getRewardTeam(address) â†’ uint
ğŸ“Œ åŠŸèƒ½ï¼šæŸ¥è¯¢ä»Šæ—¥å¯ä»¥é¢†å–çš„å›¢é˜Ÿå¥–åŠ±
ts
å¤åˆ¶
ç¼–è¾‘
const reward = await contract.getRewardTeam(userAddress);
â›“ï¸ éœ€è¦æˆæƒçš„ä»£å¸åˆçº¦åœ°å€ï¼ˆ_soskï¼‰
åœ°å€ï¼šåˆçº¦ä¸­ _sosk å­—æ®µæŒ‡å®šçš„ token åœ°å€ï¼Œè°ƒç”¨ getInfo() æˆ–æŸ¥çœ‹æºç åˆå§‹åŒ–ã€‚
